{"version":3,"sources":["../../routes/routes.js"],"names":["module","exports","app","passport","use","isLoggedIn","require","get","isNotLoggedIn","req","res","next","render","title","message","flash","redirect","post","authenticate","successRedirect","failureRedirect","failureFlash","logout","isAuthenticated"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,UAAUC,GAAV,EAAeC,QAAf,EAAyB;AACtCD,QAAIE,GAAJ,CAAQ,YAAR,EAAsBC,UAAtB,EAAkCC,QAAQ,QAAR,CAAlC;AACAJ,QAAIK,GAAJ,CAAQ,QAAR,EAAkBC,aAAlB,EAAiC,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjDD,YAAIE,MAAJ,CAAW,OAAX,EAAoB,EAACC,OAAO,OAAR,EAAiBC,SAASL,IAAIM,KAAJ,CAAU,cAAV,CAA1B,EAApB;AACH,KAFD;AAGAb,QAAIK,GAAJ,CAAQ,GAAR,EAAaF,UAAb,EAAyB,UAACI,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAkB;AACvCD,YAAIM,QAAJ,CAAa,YAAb;AACH,KAFD;;AAIAd,QAAIK,GAAJ,CAAQ,SAAR,EAAmBF,UAAnB,EAA+B,UAAUI,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACrDD,YAAIE,MAAJ,CAAW,QAAX,EAAqB,EAACC,OAAO,QAAR,EAAkBC,SAAQL,IAAIM,KAAJ,CAAU,eAAV,CAA1B,EAArB;AACH,KAFD;;AAKAb,QAAIe,IAAJ,CAAS,QAAT,EAAmBd,SAASe,YAAT,CAAsB,aAAtB,EAAqC;AACpDC,yBAAiB,GADmC;AAEpDC,yBAAiB,QAFmC;AAGpDC,sBAAc;AAHsC,KAArC,CAAnB;AAKAnB,QAAIe,IAAJ,CAAS,SAAT,EAAoBZ,UAApB,EAA+BF,SAASe,YAAT,CAAsB,cAAtB,EAAsC;AACjEC,yBAAiB,GADgD;AAEjEC,yBAAiB,SAFgD;AAGjEC,sBAAc;AAHmD,KAAtC,CAA/B;;AAMAnB,QAAIK,GAAJ,CAAQ,SAAR,EAAmB,UAAUE,GAAV,EAAeC,GAAf,EAAoB;AACnCD,YAAIa,MAAJ;AACAZ,YAAIM,QAAJ,CAAa,GAAb;AACH,KAHD;AAIH,CA7BD;;AAgCA,SAASX,UAAT,CAAoBI,GAApB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;AAChC,QAAIF,IAAIc,eAAJ,EAAJ,EACI,OAAOZ,MAAP;AACJD,QAAIM,QAAJ,CAAa,QAAb;AACH;;AAED,SAASR,aAAT,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AACnC,QAAIF,IAAIc,eAAJ,EAAJ,EACIb,IAAIM,QAAJ,CAAa,YAAb,EADJ,KAGI,OAAOL,MAAP;AACP","file":"routes.js","sourcesContent":["module.exports = function (app, passport) {\n    app.use('/dashboard', isLoggedIn, require('./item'));\n    app.get('/login', isNotLoggedIn, (req, res, next) => {\n        res.render('login', {title: 'Login', message: req.flash('loginMessage')});\n    });\n    app.get('/', isLoggedIn, (req, res, next)=>{\n        res.redirect('/dashboard')\n    });\n\n    app.get('/signup', isLoggedIn, function (req, res, next) {\n        res.render('signup', {title: 'Signup', message:req.flash('signupMessage')});\n    });\n\n\n    app.post('/login', passport.authenticate('local-login', {\n        successRedirect: '/',\n        failureRedirect: '/login',\n        failureFlash: true\n    }));\n    app.post('/signup', isLoggedIn,passport.authenticate('local-signup', {\n        successRedirect: '/',\n        failureRedirect: '/signup',\n        failureFlash: true\n    }));\n\n    app.get('/logout', function (req, res) {\n        req.logout();\n        res.redirect('/');\n    });\n};\n\n\nfunction isLoggedIn(req, res, next) {\n    if (req.isAuthenticated())\n        return next();\n    res.redirect('/login');\n}\n\nfunction isNotLoggedIn(req, res, next) {\n    if (req.isAuthenticated())\n        res.redirect('/dashboard');\n    else\n        return next();\n}"]}